{% extends "base.html" %}
{% block content %}
<h2 class="mb-3">BAU Task Automated</h2>
<p class="text-muted">Select one or more report scripts to run. You will see a success message when each completes.</p>

<form method="post" action="{{ url_for('main.execute_selected_scripts') }}">
  <div class="card mb-3">
    <div class="card-body">
      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3">
        {% for s in report_scripts %}
        <div class="col">
          <div class="form-check card h-100 p-3">
            <input class="form-check-input" type="checkbox" name="selected_scripts" value="{{ s }}" id="chk_{{ loop.index }}">
            <label class="form-check-label" for="chk_{{ loop.index }}">
              <strong>{{ s }}</strong>
            </label>
            <small class="text-muted">scripts/{{ s }}</small>
          </div>
        </div>
        {% else %}
        <div class="col">
          <div class="alert alert-warning">No scripts containing "report" found in scripts/.</div>
        </div>
        {% endfor %}
      </div>
      <div class="mt-3">
        <button type="submit" class="btn btn-primary">Run Selected</button>
      </div>
    </div>
  </div>
</form>

<script>
  // Optional: simple success pop if any Bootstrap alert-success is present
  window.addEventListener('DOMContentLoaded', () => {
    const hasSuccess = !!document.querySelector('.alert-success');
    if (hasSuccess) {
      alert('Execution completed successfully.');
    }
  });
</script>
{% endblock %}